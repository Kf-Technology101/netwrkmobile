<ion-header class="ios-head">
    <ion-toolbar *ngIf="!showContactsStep" class="connect-header">
        <ng-container>
            <ion-row class="loading bg-text" align-items-center>
                <ion-col text-center>
                    <h1 ion-text color="white">Hello, what are you wanting to do?</h1>
                </ion-col>
            </ion-row>
        </ng-container>
	</ion-toolbar>
	
	<ion-toolbar *ngIf="showContactsStep"  class="contact-header">
		<ng-container>
            <ion-row class="loading bg-text" align-items-center>
                <ion-col text-center>
                    <h1 ion-text>Who should it be sent to?</h1>
                </ion-col>
            </ion-row>
        </ng-container>
	</ion-toolbar>
</ion-header>

<ion-content class="content"  no-bounce [ngClass]="{'connect-content':!showContactsStep, 'contact-content':showContactsStep }">

<div *ngIf="!showContactsStep">
	<div class="chat-container visible">
		<div>
			<p>I want to <button (tap)="show_activity()" class="location-btn">{{activitySelected}}</button></p>		
			<p>At <button class="location-btn" (tap)="select_loaction()">{{locationSelected}}</button></p> 
		</div>
	</div>
</div>

<div *ngIf="showContactsStep" class="contacts-div">
	<div class="chat-container visible">
	
		<div class="error" *ngIf="error_txt != ''">{{error_txt}}</div> 
		<div class="container-title">
			Communities 
		</div>
		<ng-container *ngFor="let post of posts | sort: {property: 'title', order: 1}">
		  <ion-row class="post" [ngClass]="{'new-community':newlyAdded != null && newlyAdded.id == post.id}">
			<div class="post-cont">
			  <img [src]="post.avatar_url" class="chat-avatar conversation"
				  (error)="chatPrvd.updateAvatarUrl($event)">

			  <div class="username">
				<ng-container>
				  {{ post.title}}
				</ng-container>
				<ion-checkbox [disabled]="isDisabled && selectedCommunity[0].id != post.id" (ionChange)="selectMe(post,$event)" [checked]="newlyAdded && newlyAdded.id == post.id"  color="dark"></ion-checkbox>
			  </div> 
			</div>
		  </ion-row>		
		</ng-container>
		
		<ion-row class="post" >
			<div class="post-cont">
			  <img src="assets/icon/netwrk-chat.svg" class="chat-avatar conversation"
				  (error)="chatPrvd.updateAvatarUrl($event)">
			  <div class="username">
				<ng-container>
				  Create a new community
				</ng-container>
				<ion-checkbox color="dark" [disabled]="isDisabled" (ionChange)="createNewCommunity($event)" [checked]="isCreateCheck"> </ion-checkbox> 
			  </div> 
			</div>
		</ion-row>		
		
		<div class="container-title top-margin-20">
			Friends
		</div>
		
		<ng-container *ngFor="let person of contacts | sort: {property: 'name', order: 1}">
		  <ion-row class="post" >
			<div class="post-cont">
			  <div class="username">
				<ng-container>
				  #{{person.name}} 	
				</ng-container>
				<ion-checkbox color="dark" (ionChange)="selectPerson(person,$event)" ></ion-checkbox>
			  </div>
			  <div>
				{{person.phoneNumbers[0].value}}
			  </div>			  
			</div>
		  </ion-row>		
		</ng-container>
	</div>
</div>

		
<div class="virtual-custom-scroll-wrapper" [ngStyle]="{'opacity': showActivitiesContainer && !showContactsStep?'1':'0'}">
	<div class="virtual-custom-scroll-container">  
		<ion-scroll [virtualScroll]="activity" approxItemHeight="3px" class="activity-list"> 
		  <ion-item *virtualItem="let activity_item">
			<button class="activity-btn" (tap)="select_activity(activity_item)">{{activity_item.itemName}}</button>
		  </ion-item>
		</ion-scroll>
	</div>
</div>



</ion-content>

 

<ion-footer *ngIf="!showActivitiesContainer">
	<button class="save-btn" (tap)="showContacts()" *ngIf="!showContactsStep">
       <img  src="assets/icon/netwrk-chat.png" style="touch-action: pan-y; user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
	</button>
  
	<button ion-button color="bk" class="main-action-btn medium transparent" outline (tap)="goToLanding()" [ngClass]="{'bottom-margin':showContactsStep}" *ngIf="!showContactsStep">
	  <ion-icon ios="ios-arrow-forward-outline" md="ios-arrow-forward-outline"  style="padding-left:3px;"></ion-icon>
	</button>
	
	<button ion-button class="main-action-btn medium forward contacts-list-btn" outline (tap)="sendMessage()" [ngClass]="{'bottom-margin':showContactsStep}" *ngIf="showContactsStep">
	   <ion-icon ios="ios-arrow-forward-outline" md="ios-arrow-forward-outline"  style="padding-left:3px;"></ion-icon>
	</button>
	
	<ion-input #textInput id="textInput" type="text" class="message-input" [placeholder]="placeholderText" *ngIf="showContactsStep">
	</ion-input>
	
	<button ion-button color="bk" class="back-btn" outline (tap)="goToLanding()" *ngIf="showContactsStep">
	   Back
	</button>
	
	
</ion-footer>
