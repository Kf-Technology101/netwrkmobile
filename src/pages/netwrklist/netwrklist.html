
<ion-header class="ios-head">
    <ion-toolbar>
        <ng-container>
            <ion-row class="loading bg-text" align-items-center>
                <ion-col text-center>
                    <h1 ion-text color="white">Hello, here are the networks near you.</h1>
                </ion-col>
            </ion-row>
        </ng-container>

        <div ion-text color="bk" class="area-subhead-tip">
            <span class="subhead-container" (click)="resetFilter()">
                
				<div class="flex-ch netwrk-name">
                    <span *ngIf="chatPrvd.holdFilter" class="username" >
                        15 Miles
                    </span>
                    <span *ngIf="!chatPrvd.holdFilter" class="username">
                        All
                    </span>
                </div>
				
                <div class="flex-ch">
                    <button ion-button class="netwrk-icon">
                        <!-- <img class="netwrk-img" src="assets/icon/netwrk-chat.svg"> -->
                        <img class="netwrk-img" src="assets/icon/blue.png">
					</button>
                </div>
				
                <div class="flex-ch">
					<span class="netwrk-users">{{netwrkLineList.length}} </span> 
					<img src="assets/icon/netwrk-chat.png" class="netwrk-chat-icon">
				</div>
            </span>
        </div>
    </ion-toolbar>
</ion-header>

<ion-content class="connect arealist content"  no-bounce>

    <!--Loader on swap-->
    <ion-refresher (ionRefresh)="refreshChat($event)">
        <ion-refresher-content pullingIcon="arrow-dropdown" refreshingSpinner="ios"></ion-refresher-content>
    </ion-refresher>


    <div class="chat-container visible">
       <div class="visible item-line" *ngFor="let message of netwrkLineList; let i = index" >  
		<div [ngClass]="{ 'active-cl' : message.addClass }"> 	
            <ng-container ><!-- *ngIf="user.id != message.user_id && !locked_by_user" -->
                <img [src]="message.avatar_url" class="chat-avatar" (error)="chatPrvd.updateAvatarUrl($event)">
			    <p class="message-container" [ngStyle]="{'min-height': message.message_type=='CUSTOM_LOCATION'?'80px':''}">
				  <span class="location" (click)="openLineLobby(message)">
					<ng-container>
						{{ message.place_name }}
					</ng-container>
				  </span>
				  <ng-container>  <!-- *ngIf="message.user" -->
					<div class="username" (click)="openLineLobby(message)" *ngIf="message.public">
						{{ message.title }}
					</div >
					<div class="username" (click)="openLineLobby(message)" *ngIf="!message.public">
						{{ message.role_name }}
					</div>
				  </ng-container>
				  <ng-container>
					<div (click)="openLineLobby(message)" class="description">
					{{ message.text }} 
					<span class="text-connected" *ngIf="message.is_followed">(Connected..)</span>
					</div>
				  </ng-container>                    
				  <span class="message-date">{{ message.dateStr }}</span>
                </p>

                <button ion-button class="feedback-button" color="bk" item-end (click)="followNearByNetwork(message)" *ngIf="user.id != message.user_id">
				<!-- [ngClass]="{ 'isFollowed' : message.is_followed }"  -->
                    <ion-icon ios="ios-add" md="md-add" *ngIf="!message.is_followed"></ion-icon>
                    <ion-icon ios="ios-remove" md="md-remove" *ngIf="message.is_followed"></ion-icon>					
                </button>

                <button ion-button class="feedback-button" color="bk" item-end (click)="goToProfile(message.user_id, message.public, message.user.role_name)" [ngClass]="{ 'isFollowed' : message.is_followed }"  *ngIf="user.id == message.user_id">
                    <ion-icon ios="ios-settings" md="md-settings"></ion-icon>
                </button>
				
				<button class="recast-button" [ngClass]="{ 'disabled' : !message.is_synced}" (click)="feedbackService.initNativeShare(message)" *ngIf="message.messageable_type!='Reply'">
					Share
				</button>
			
				<button ion-button class="feedback-button down-btn ncl-btn" color="bk" item-end (click)="getNCL(message,$event,i)" *ngIf="message.message_type=='CUSTOM_LOCATION' && message.lines_count">
                   <ion-icon ios="ios-arrow-down" md="ios-arrow-down" class="arrow-down" ></ion-icon>
				   <ion-icon ios="ios-arrow-up" md="ios-arrow-up" class="arrow-up" ></ion-icon>
                </button>

            </ng-container>
			</div>
        </div>
    </div>

    <!--Infinite Loader on bottom scroll-->
    <ion-infinite-scroll (ionInfinite)="doInfinite($event)">
        <ion-infinite-scroll-content></ion-infinite-scroll-content>
    </ion-infinite-scroll>

</ion-content>


<ion-footer>
  <button ion-button color="bk" class="main-action-btn medium transparent" outline (tap)="goToLanding()">
       <!--<ion-icon ios="ios-arrow-forward-outline" md="ios-arrow-forward-outline"></ion-icon>-->
  </button>
</ion-footer>
